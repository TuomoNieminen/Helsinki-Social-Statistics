---
title       : Exploring variation and dependence
description : Variation and dependence are at the heart of Statistics. In fact, without variation the discipline would cease to exist. Correlation is not causation, but why?

--- type:NormalExercise lang:r xp:100 skills:1 key:1d52143e10

## Guess the correlation

Correlation measures the strength of the *linear* relationship between two variables. The easiest way to check if the relationship between two variables might be  interpret as linear is to visualize the relationship with a scatterplot. 

It is then possible to make a reasonable guess of the strength of the linear relationship. In order for you to practise this skill, we have build a game you can play.

*** =instructions
- Use `simulate()` to draw a scatter plot using simulated data. The variables can have linear and nonlinear relationships. Try to guess what the correlation might be.
- Use `show_correlation()` to check how close you got.
- You can experiment as many times as you wish and the simulation will be different each time. Feel free to change `n`, the number of simulated values.

*** =hint
- When you are done experimenting, simply click 'Submit Answer' to move forward.


*** =pre_exercise_code
```{r}
# simulate and plot correlated data
simulate <- function(n = 60) {
  
  if(n > 1e5) stop("That n is quite large. Please choose a smaller n")
  
  # degree (d) of the polynomial
  degree <- sample(1:3, 1)
  
  # x values
  x <- rnorm(n)
  
  # each x^d multiplied by it's coefficient
  # the coefficients are sampled from U(-1, 1)
  X <- sapply(1:degree, function(d) {
    b <- runif(1, min = -1, max = 1)
    b * x^d
  })
  
  # linear equation y = b_1 * x^1 + .. + b_d * x^d + e
  y <- rowSums(X) + rnorm(n)
  
  # scatterplot
  plot(x, y, col = "grey40", type = "p", pch= 20, xlab="", ylab="")
  
  return(list(x = x, y = y))
}

show_correlation <- function(df) {
  x <- df$x
  y <- df$y
  plot(x, y, type = "p", col = "grey40", pch= 20, xlab="", ylab="",
       sub = paste("correlation:", round(cor(x, y),2)))
  abline(lm(y~x), col ="red")
}

```

*** =sample_code
```{r}
# Functions simulate() and show_correlation() are available

# Simulate values and draw a scatterplot
data <- simulate(n = 60)

# What is the correlation?

# Show the linear relationship and correlation
show_correlation(data)

```

*** =solution
```{r}
#solution code here
```

*** =sct
```{r}

test_error()
success_msg("Thanks for playing!")
```
