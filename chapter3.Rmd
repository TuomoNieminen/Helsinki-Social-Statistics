---
title       : Looking at the data
description : Data are everywhere and everything. That's why Statistics is also called Data Science. R offers great tools for looking at the data, behind the numbers.

--- type:NormalExercise lang:r xp:100 skills:1 key:9c7624db08

## Getting intimate with the data

In this section, you will learn how to get familiar with your data by zooming in on it, visualizing it and summarizing it.

These are always the first things to do after the data is collected and preprocessed (cleaned).


*** =instructions
- Take a look at the examples, you will learn more about all of them in the next exercises.
- Execute the line that produces summaries of all the variables in `students2014`.
- Click 'Submit Answer'.



*** =pre_exercise_code
```{r}
  # load data from web
students2014 <- read.table("http://www.helsinki.fi/~kvehkala/JYTmooc/JYTOPKYS-data.txt", sep="\t", header=TRUE)
  # keep a couple background variables
students2014 <- students2014[,c("sukup","toita","ika","pituus","kenka","kone")]
  # recode kone variables missing values as factor levels
students2014$kone <- addNA(students2014$kone)
  # keep only rows without missing values
students2014 <- students2014[complete.cases(students2014),]

# draw plots in one window
layout(matrix(c(1,2,3,3), 2, 2, byrow =TRUE))
    
#histogram of heights
hist(students2014$pituus,  main ="Histogram of height", xlab = "height")

# bar plot of operating systems 
barplot(table(students2014$kone), main = "Barplot of OS", xlab = "Linux, Mac, Win or none")
  
# horizontally placed box plot of ages
boxplot(students2014$ika, main = "Boxplot of age", xlab = "ika", horizontal = T)


```

*** =sample_code
```{r}
# students2014 is available and layout() has been called. Three plots will be placed in the same window.
    
# Histogram of student heights
hist(students2014$pituus,  main ="Histogram of height", xlab = "height")

# Bar plot of operating systems 
barplot(table(students2014$kone), main = "Barplot of OS", xlab = "Linux, Mac, Win or none")
  
# Box plot of student ages
boxplot(students2014$ika, main = "Boxplot of age", xlab = "ika", horizontal = T)

# Summaries of all variables
summary(students2014)


```

*** =solution
```{r}
# Summaries of all variables
summary(students2014)
```

*** =sct
```{r}

test_output_contains("summary(students2014)")

test_error()
success_msg("Ready? Let's go for it!")
```


--- type:NormalExercise lang:r xp:100 skills:1 key:04d17eac03
## Brackets have your data [ under, control ]

It is quite often necessary to access only a part of a dataset. This is called *subsetting* and there are many ways of doing it. The best way will depend on the situation and  preference.

We have already seen that the columns of a data frame (df) can be accessed via `$`. There is another, more general method: `[ ]`. The brackets are a way of accessing a part of any data structure in R. 

The way to use brackets is by giving the locations of the values you wish to access.


*** =instructions
- Study the examples on how to select parts of a data frame.
- Replace `NULL` so that the object `age_height` contains the third and fourth columns of students2014.
- Modify the code to print out the first five rows of `age_height`.


*** =hint
- Selecting multiple columns is very similar to selecting multiple rows.
- See the first example on how to select multiple rows.


*** =pre_exercise_code
```{r}
students2014 <- read.table("http://www.helsinki.fi/~kvehkala/JYTmooc/JYTOPKYS-data.txt", sep="\t", header=TRUE)
  
  # keep a couple background variables
  students2014 <- students2014[,c("sukup","toita","ika","pituus","kenka","kone")]
  
  # recode kone -variable NA values as factor levels
  students2014$kone <- addNA(students2014$kone)
  
  # choose rows without missing values
  students2014 <- students2014[complete.cases(students2014),]

```

*** =sample_code
```{r}
# students2014 is available

# Look at the rows three to six of the data
students2014[3:6, ]

# Look at the value in row 6, column 4
students2014[6, 4]

# Choose the whole column 3 and save it as an object
student_age <- students2014[, 3]

# Choose the third and fourth columns and save them as an object
age_height <- students2014[, NULL]

# Print out the first five rows of age_height
age_height[NULL, ]


```

*** =solution
```{r}
# students2014 is available

# Look at the rows three to six of the data
students2014[3:6, ]

# Look at the value in row 6, column 4
students2014[6, 4]

# Choose the whole column 3 and save it as an object
student_age <- students2014[, 3]

# Choose the third and fourth columns and save them as an object
age_height <- students2014[, 3:4]

# Print out the first five rows of age_height
age_height[1:5, ]



```

*** =sct
```{r}
test_object("age_height")

test_error()
success_msg("Good work!")
```


--- type:NormalExercise lang:r xp:100 skills:1 key:457280046c

## Bar plots for discrete variables

Bar plots are useful for visualizing qualitative, discreate variables, which in R are usually stored as character, factor or perhaps boolean data types. A bar plot represents the counts of the unique values of the variable of interest. Drawing a bar plot only makes sense when the variable is discreate and there are only a few unique values possible.

In this exercise you will draw a barplot of `kone` in the data frame `students2014`. For each student the value of `kone` is the operating system of the students computer, for more information see [meta](http://www.helsinki.fi/~kvehkala/JYTmooc/JYTOPKYS-meta.txt).

In base R graphics, the function `barplot()` can be used to draw a bar plot. The information needed for the function can be computed by first creating a `summary()` or a `table()` of the variable.

Many of the values of `kone` are `<NA>`, not available. Why do you think this could be?

*** =instructions
- Use `summary()` on `kone` in the data frame `students2014`. What does it show you?
- Create an object `os_counts` by assigning the output of `summary()` to it.
- Use the function `barplot()` to draw a bar plot. Use the object you created as the first argument.

*** =hint
- replace `NULL` with the example code using `summary()` to create the object `os_counts`.
- Then give the object os_counts an argument inside the parenthesis in `barplot()`. 


*** =pre_exercise_code
```{r}
  # load data from web
students2014 <- read.table("http://www.helsinki.fi/~kvehkala/JYTmooc/JYTOPKYS-data.txt", sep="\t", header=TRUE)
  # keep a couple background variables
students2014 <- students2014[,c("sukup","toita","ika","pituus","kenka","kone")]
  # recode kone variables missing values as factor levels
students2014$kone <- addNA(students2014$kone)
  # keep only rows without missing values
students2014 <- students2014[complete.cases(students2014),]

```


*** =sample_code
```{r}
# students2014 is available

# Look at the counts of different levels of 'kone'.
summary(students2014$kone)

# Create object os_counts that stores the counts
os_counts <- NULL


# Call barplot() to draw a graph. Use the object you created as the first argument.

  
```

*** =solution
```{r}
# Look at the counts of different levels.
summary(students2014$kone)

# Create object os_counts that stores the counts
os_counts <- summary(students2014$kone)

# Call barplot() to draw a graph. Use the object you created as an argument.
barplot(os_counts)



```

*** =sct
```{r}

test_function("barplot", args="height")

# test error
test_error()

# Final message the student will see upon completing the exercise
success_msg("Excellent work!")

```

--- type:NormalExercise lang:r xp:100 skills:1 key:82217456fa

## Bar plots for continuous variables

When a variable is continuous by nature, it means that it can in theory take on so many different values that all of it's observed values are unique. In practise though, all measurements are discreate and hence continuity is a matter of interpretation.

Age can be interpret as continuous because of the continuous nature of time. The exact age of a person depends on the exact time of birth and is hence different for all.

Age is often measured as rounded down years. Even then, there are too many unique values to draw bar plot that makes sense. A solution is to first categorize age.


*** =instructions
- Create a histogram of 
- Adjust your code and draw the histogram again using `breaks = 12`.
- Adjust your code and give your histogram a nice color using the `col` argument. Use quotations marks to define the color name.


*** =hint
- You can access the column of a data frame (df) with the `$` symbol: `df$column_name`.
- Remember to seperate the arguments of a function with a comma.


*** =pre_exercise_code
```{r}
  # load data from web
students2014 <- read.table("http://www.helsinki.fi/~kvehkala/JYTmooc/JYTOPKYS-data.txt", sep="\t", header=TRUE)
  # keep a couple background variables
students2014 <- students2014[,c("sukup","toita","ika","pituus","kenka","kone")]
  # recode kone variables missing values as factor levels
students2014$kone <- addNA(students2014$kone)
  # keep only rows without missing values
students2014 <- students2014[complete.cases(students2014),]

```


*** =sample_code
```{r}
# students2014 is available

# draw a barplot of student age
barplot(students2014$ika)

# split age to intervals
age_cut <- cut(students2014$ika, c(0, 16, 20,24,30, 100))

barplot(summary(age_cut))



```

*** =solution
```{r}
# draw a barplot of student age
barplot(students2014$ika)

# split age to intervals
age_cut <- cut(students2014$ika, c(0, 16, 20,24,30, 100))

barplot(summary(age_cut))

```

*** =sct
```{r}

test_function("hist", args=c("x","breaks"))

# test error
test_error()


# Final message the student will see upon completing the exercise
success_msg("Good work!")

```

--- type:NormalExercise lang:r xp:100 skills:1 key:86cee4bd71

## Histograms

Drawing a histogram basically means following the steps in the previous exercise. Basic histograms can be drawn with the `hist()` function. The first argument of `hist()`, `x` should be a numeric vector of data values. The argument `breaks` can be used to approximately control the number of intervals.

As with all the plotting functions in R, the `hist()` function can take on many additional arguments which allow for more control over the plot. One simple argument is `col`, which defines the color of the bars.

`col` can be a character string giving the name of the color ("blue", "green", etc). Some possible color names can be found <a target="_blank" href="http://www.stat.columbia.edu/~tzheng/files/Rcolor.pdf">here</a> The `breaks` argument can be used to control the approximate number of bins in the histogram.

*** =instructions
- Create a histogram of 
- Adjust your code and draw the histogram again using `breaks = 12`.
- Adjust your code and give your histogram a nice color using the `col` argument. Use quotations marks to define the color name.


*** =hint
- You can access the column of a data frame (df) with the `$` symbol: `df$column_name`.
- Remember to seperate the arguments of a function with a comma.




*** =pre_exercise_code
```{r}
# pre exercise code here
```

*** =sample_code
```{r}
# sample code here
```

*** =solution
```{r}
#solution code here
```

*** =sct
```{r}
# submission correctness tests

# example tests:
# test_output_contains("output")
# test_object("object_name")
# test_function("function_name", args=c("arg1"))

# test if the students code produces an error
test_error()

# Final message the student will see upon completing the exercise
success_msg("Good work!")

```



--- type:NormalExercise lang:r xp:150 skills:1 key:c3d62c54f5

## Box plots

One very good way to visualize the most important summary statistics of a variable is by drawing box plots. A box plot visualizes the 25th, 50th and 75th percentiles (the box), the typical range (the whiskers) and the outliers (the dots) of a variable 

The whiskers extending from the box can be computed by several techniques. The default in R is to extend them to reach to a data point that is no more than 1.5*IQR away from the box, where IQR is the inter quartile range defined as  

`IQR = 75th percentile - 25th percentile`  

Values outside the whiskers can be considered as outliers, unusually distant observations. For more information on IQR, see <a target="_blank" href ="https://en.wikipedia.org/wiki/Interquartile_range"> wikipedia</a>

*** =instructions
- Draw a `boxplot()` of `var`.
- Use help() or `?` to find out which argument controls the label of the y axis and the main title.
- Add a suitable label to the y axis and a main title of your choice.

*** =hint
- hint1

*** =pre_exercise_code
```{r}
# pec
```


*** =sample_code
```{r}
# data frame is available

# See the help page of boxplot()
?boxplot

# Draw a boxplot of var. Add a y axis label and a main title.



```

*** =solution
```{r}
# Draw a boxplot of var. Add a y axis label and a main title.
boxplot(var, ylab = "", main = "")


```

*** =sct
```{r}


test_function("boxplot", args="x")

# test error
test_error()


# Final message the student will see upon completing the exercise
success_msg("Awsome work!")

```

