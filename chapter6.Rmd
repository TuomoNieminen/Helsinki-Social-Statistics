---
title       : Conditions and subsets
description : UNDER CONSTRUCTION

--- type:NormalExercise lang:r xp:100 skills:1 key:d64c2a9918
## Welcome to part 2

info about data

*** =instructions
- instruction 1

*** =hint
- hint 1

*** =pre_exercise_code
```{r}
# data
df <-  read.table("http://www.helsinki.fi/~kvehkala/JYTmooc/learning2014.txt", sep = "\t", header = TRUE)
points <- table(cut(df$points, (0:11)*3, include.lowest=T))
deep <- table(cut(df$deep, 1:5, include.lowest = T))
stra <- table(cut(df$stra, 1:5, include.lowest = T))
surf <- table(cut(df$surf, 1:5, include.lowest = T))

# plots
barplot(table(df$gender), main = "Distribution of students gender")
boxplot(df$age, main = "Box plot of students age", xlab = "age", horizontal = T)
barplot(points, las = 2, main = "Distribution of students exam points", xlab = "")
barplot(surf, main = "Distribution of students scores on surface learning")
barplot(deep, main = "Distribution of students scores on deep learning")
barplot(stra, main = "Distribution of students scores on strategic learning")


```

*** =sample_code
```{r}
# sample code here
```

*** =solution
```{r}
#solution code here
```

*** =sct
```{r}

# test_output_contains("output")
# test_object("object_name")
# test_function("function_name", args=c("arg1"))

test_error()
success_msg("Good work!")
```


--- type:NormalExercise lang:r xp:100 skills:1 key:c12d1b7017

## Selecting a subset()

Earlier in chapters 3 and 4 you learned how to look at your data with visualizations and summaries. This is great, but often there is a need to zoom in on a **subset** of the data matching some *condition*.

There are multiple ways to select a subset in R. Perhaps the most convenient method is the `subset()` function. `subset()` is a generic function that works with several data formats. The first argument of `subset()` is the data, and the second argument are the *logical conditions* for selecting parts of the data.  

When used on a data.frame, `subset()` returns the rows of the data.frame which match the specified logical conditions. You will soon learn more about logical conditions.

*** =instructions
- Execute the example codes
- Look at the first 6 rows of the strategic learners subdata
- Create your own subset by selecting the students with attitude less than 3

*** =hint
- Use the functions `head()` and `subset()` as in the example codes.
- The strategic learning variable is named `stra`. The attitude variable is named `attitude`.
- Use the operator `<` similarily to it's counterpart `>` in the example.


*** =pre_exercise_code
```{r}
learning2014 <- read.table("http://www.helsinki.fi/~kvehkala/JYTmooc/learning2014.txt", sep = "\t", header = TRUE)

```

*** =sample_code
```{r}
# learning2014 is available

# Look at the first 6 rows of the learning data
head(learning2014)

# select students with above (>) 4 strategic learning
stra_learners <- subset(learning2014, stra > 4)

# Look at the first 6 rows of stra_learners


# select students with below (<) 3 attitude
attitude_low <- 


```

*** =solution
```{r}
# learning2014 is available

# Look at the first 6 rows of data
head(learning2014)

# select students with above (>) 4 strategic learning
stra_learners <- subset(learning2014, stra > 4)

# Look at the first 6 rows of the subdata
head(stra_learners)

# select students with below (<) 3 attitude
attitude_low <- subset(learning2014, attitude < 3)


```

*** =sct
```{r}
# submission correctness tests

# example tests:
test_output_contains("head(stra_learners)")
test_object("attitude_low")

# test if the students code produces an error
test_error()

# Final message the student will see upon completing the exercise
success_msg("Great work!")

```

--- type:NormalExercise lang:r xp:100 skills:1 key:73f94cfacf

## Logical comparison

What you just saw inside the `subset()` function was  **logical comparison**. Logical comparison creates logical vectors, which can then be used to select subsets of data for example.

Logical conditions have other uses as well and are generally important in programming tasks. The logical comparison operators in R are:  

operator  | description
----------|------------
`==`      | exactly equal to
`!=`      | not equal to
`<`       | less than
`>`       | greater than
`<=`      | less or equal to
`>=`      | greater or equal to


When used with vectors, logical comparison produces a logical vector.

*** =instructions
- Execute and study the example codes
- Add to the row with c("a","b","c"): select a suitable logical comparison operator and a suitable comparison value to produce a result vector `FALSE, FALSE, TRUE`
- Add to the row with c(1,3,2): select a suitable logical comparison operator and a suitable comparison value to produce a result vector `FALSE, FALSE, TRUE`

*** =hint
- The third example should point you in the right direction
- If you're uncertain, just choose a value and try out a bunch of different operators to figure out what might work.


*** =pre_exercise_code
```{r}
# no pec
```

*** =sample_code
```{r}
# exactly equal
5 == 5 # TRUE

# Not equal
"cat" != "dog" # TRUE

# Greater or equal 3 times
c(0,1,2) >= 1 # F, T, T

# Use logical comparison to produce a result F, F, T
c("a","b","c")

# Use logical comparison to produce a result T, F, T
c(1,3,2)


```

*** =solution
```{r}
# exactly equal
5 == 5 # TRUE

# Not equal
"cat" != "dog" # TRUE

# Greater or equal 3 times
c(0,1,2) >= 1 # F,T,T

# Use logical comparison to produce a result F,F,T
c("a","b","c") == "c"

# Use logical comparison to produce a result T,F,T
c(1,3,2) < 3

```

*** =sct
```{r}
# submission correctness tests

# example tests:
test_output_contains("c('a','b','c')=='c'", incorrect_msg = "Please make the necessary adustments to produce the output FALSE FALSE TRUE")

test_output_contains("c(1,3,2)<3", incorrect_msg = "Please make the necessary adustments to produce the output TRUE FALSE TRUE")

# test if the students code produces an error
test_error()

# Final message the student will see upon completing the exercise
success_msg("Well done! Logic is the beginning of wisdom, not the end.")

```

--- type:NormalExercise lang:r xp:100 skills:1 key:d7b5a24d40

## Logical operators

Logical conditions can be combined with the following logical operators:

operator                | description
----------------------- | -----------
`!`a                    | not a
a `&` b                 | a and b
a <code>&#124;</code> b | a or b  

Logical operators work like logical conditions: they compare the elements of vectors one at a time and can produce logical vectors.

In R, simply typing `T` and `F` can be used to abreviate boolean values `TRUE` and `FALSE`. So, for example `c(F, T) & c(T, T)` produces a logical vector `FALSE TRUE` because `F & T` equals `FALSE` and `T & T` equals `TRUE`. 
It is also possible to use parenthesis when using multiple conditions, to control the evaluation of the operators. With these tools you are now ready to do some serious subsetting.

*** =instructions
- Create and print out four subsets matching the following conditions: 
- (gender is male) AND (deep learning is greater than 4.5)
- (age is 25 OR age is 26) AND (attitude is greater than 3.5)
- (gender is female) AND (strategic learning is greater than 4.5)
- (deep learning is more than 4) AND (points is zero OR points is greater than 30)

*** =hint
- The instructions show the correct use of parenthesis when using the logical operators and conditions


*** =pre_exercise_code
```{r}
learning2014 <- read.table("http://www.helsinki.fi/~kvehkala/JYTmooc/learning2014.txt", sep = "\t", header = TRUE)

```

*** =sample_code
```{r}
# learning2014 is available

# male students who scored very high on deep learning
subset(learning2014, (gender == "M") & (deep > 4.5))

# 25 or 26 old students who scored high on attitude
subset(learning2014, (age == 25 | age == 26) & (attitude > 3.5))

# female students who scored very high on strategic learning


# students who scored high on deep learning for whom points is 0 or greater than 30



```

*** =solution
```{r}
# learning2014 is available

# male students who scored very high on deep learning
subset(learning2014, (gender == "M") & (deep > 4.5))

# 25 or 26 old students who scored high on attitude
subset(learning2014, (age == 25 | age == 26) & (attitude > 3.5))

# female students who scored very high on strategic learning
subset(learning2014, (gender == "N") & (stra > 4.5))

# students who scored high on deep learning for whom points is 0 or greater than 30
subset(learning2014, deep > 4 & (points == 0 | points > 30))


```

*** =sct
```{r}
# submission correctness tests

test_output_contains("subset(learning2014,(gender=='N')&(stra>4.5))", incorrect_msg="Please print out the subset containing the female students with high strategic learning scores")
test_output_contains("subset(learning2014,deep>4&(points==0|points>30))", incorrect_msg="Please print out the subset containing the students who scored high on deep learning and had either no points or very high points")

# test if the students code produces an error
test_error()

# Final message the student will see upon completing the exercise
success_msg("Excellent! You are the operator indeed.")

```

--- type:NormalExercise lang:r xp:100 skills:1 key:71e768aa4c

## Classical probability

Probability is the measure of the likelihood that an event will occur. It is quantified as a number between 0 and 1. Probability is an **essential** tool for statistics since the discipline is primarily interested in measuring uncertainty.

The classical definition of probability is the proportion of favourable cases over all possible outcomes Thus, the probability of an event $A$ with $f$ favourable cases out of $N$ possible outcomes is:

$$P(A) = \frac{f}{N}$$


*** =instructions
- For the next questions assume that we randomly pick a single student from the learning2014 data.
- What is the probability that the student is female?
- What is the probability that the student has scored more than 3 on attitude?
- What is the probability that the student is male and has scored more than 4  on attitude?
- Round the answers to 2 digits and save them to the objects as in the example

*** =hint
- Use the table created and count the number of favourable cases (f) and the number of all possible cases (N)
- The asked probabilities are then f / N


*** =pre_exercise_code
```{r}
learning2014 <-  read.table("http://www.helsinki.fi/~kvehkala/JYTmooc/learning2014.txt", sep = "\t", header = TRUE)

```

*** =sample_code
```{r}
# learning2014 is available

# transform attitude into a factor and cross table with gender
attitude <- cut(learning2014$attitude, 1:5, include.lowest = T)
gndr_att <- table(learning2014$gender, attitude)
addmargins(gndr_att)

# P(gender = M)
p1 <- round(61/183, digits = 2)

# P(gender = N)
p2 <- 

# P(attitude > 3)  
p3 <-

# P(gender = M, attitude > 4)
p4 <- 


```

*** =solution
```{r}
# learning2014 is available

# transform attitude into a factor and cross table with gender
attitude <- cut(learning2014$attitude, 1:5, include.lowest = T)
gndr_att <- table(learning2014$gender, attitude)
addmargins(gndr_att)

# P(gender = M)
p1 <- round(61/183, digits = 2)

# P(gender = N)
p2 <- round(122/183, digits = 2)

# P(attitude > 3)  
p3 <- round((85+19)/183, digits = 2)

# P(gender = M, attitude > 4)
p4 <- round(12/183, digits = 2)


```

*** =sct
```{r}
# submission correctness tests

# example tests:
test_object("p2")
test_object("p3")
test_object("p4")

# test if the students code produces an error
test_error()

# Final message the student will see upon completing the exercise
success_msg("Great! You are probably a genius!")


```

--- type:NormalExercise lang:r xp:100 skills:1 key:562f9818e0

## Conditional probability

Under construction.

*** =instructions
- instruction 1
- instruction 2

*** =hint
- hint 1
- hint 2


*** =pre_exercise_code
```{r}
# pre exercise code here
```

*** =sample_code
```{r}
# sample code here
```

*** =solution
```{r}
#solution code here
```

*** =sct
```{r}
# submission correctness tests

# example tests:
# test_output_contains("output")
# test_object("object_name")
# test_function("function_name", args=c("arg1"))

# test if the students code produces an error
test_error()

# Final message the student will see upon completing the exercise
success_msg("Good work!")

```

